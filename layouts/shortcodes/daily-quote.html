{{ $quotes := .Site.Data.quotes.quotes }}  <!-- 从 data/quotes.yaml 读取格言列表 -->

{{ if $quotes }}
    {{ if gt (len $quotes) 0 }}  <!-- 确保 `quotes` 不是空列表 -->
        <p id="daily-quote" class="daily-quote">加载中...</p>  <!-- 初始状态，防止加载时出现空白 -->

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var quotes = {{ $quotes | jsonify | safeJS }};  // 将 Hugo 变量转换成 JavaScript 可用的 JSON 格式

                if (Array.isArray(quotes) && quotes.length > 0) {
                    var index = Math.floor(Math.random() * quotes.length);  // 生成一个 0 到 quotes.length-1 之间的随机索引
                    document.getElementById("daily-quote").innerText = quotes[index];  // 在页面上更新随机格言
                } else {
                    document.getElementById("daily-quote").innerText = "无法加载格言";  // 如果 `quotes` 为空，则显示错误提示
                }
            });
        </script>
    {{ else }}
        <p class="daily-quote">暂无可用格言，请检查 data/quotes.yaml 格式</p>  <!-- 格言列表为空时的提示 -->
    {{ end }}

{{ else }}
    <p class="daily-quote">无法加载格言，请检查 data/quotes.yaml 是否存在</p>  <!-- 文件未找到时的提示 -->
{{ end }}


<style>
.daily-quote {
    font-style: normal;
    color: #5D3FD3;
    text-align: left;
    margin: 20px 0;
    font-size: 1.2em;
    font-weight: bold;
    padding: 12px 15px;
    background: #f4f0ff;
    border-left: 4px solid #7D5FB2;
    border-radius: 5px;
    max-width: 600px;
    margin-left: 0;
    box-shadow: 2px 2px 8px rgba(93, 63, 211, 0.2);
}
</style>
